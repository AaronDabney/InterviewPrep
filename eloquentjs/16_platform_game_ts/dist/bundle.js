/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./index.ts":
/*!******************!*\
  !*** ./index.ts ***!
  \******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _src_controlMapping__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./src/controlMapping */ \"./src/controlMapping.ts\");\n/* harmony import */ var _src_runTime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./src/runTime */ \"./src/runTime.ts\");\n/* harmony import */ var _src_levels_gameLevels__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./src/levels/gameLevels */ \"./src/levels/gameLevels.ts\");\n\n\n\nvar commands = (0,_src_controlMapping__WEBPACK_IMPORTED_MODULE_0__.controlMapping)({\n    left: \"ArrowLeft\",\n    right: \"ArrowRight\",\n    jump: \"ArrowUp\"\n});\n(0,_src_runTime__WEBPACK_IMPORTED_MODULE_1__.runGame)(_src_levels_gameLevels__WEBPACK_IMPORTED_MODULE_2__.GAME_LEVELS, commands);\n\n\n//# sourceURL=webpack://browser-test/./index.ts?");

/***/ }),

/***/ "./src/actors/coin.ts":
/*!****************************!*\
  !*** ./src/actors/coin.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   create: () => (/* binding */ create)\n/* harmony export */ });\n/* harmony import */ var _vector_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../vector_utils */ \"./src/vector_utils.ts\");\n/* harmony import */ var _gameState__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../gameState */ \"./src/gameState.ts\");\n\n\n/**\n * Creates actor instance of type coin\n * @param position\n * @returns\n */\nfunction create(position) {\n    var displayOffset = _vector_utils__WEBPACK_IMPORTED_MODULE_0__.create(0.2, 0.1);\n    var startingPosition = _vector_utils__WEBPACK_IMPORTED_MODULE_0__.add(position, displayOffset);\n    // Wobble is assigned to random starting phase\n    var wobble = Math.random() * Math.PI * 2;\n    return {\n        position: startingPosition,\n        size: _vector_utils__WEBPACK_IMPORTED_MODULE_0__.create(0.6, 0.6),\n        type: 'coin',\n        state: {\n            basePosition: startingPosition,\n            wobble: wobble\n        },\n        update: update,\n        collide: collide,\n    };\n}\n/**\n * This collision function returns the gameState with coin removed and will change the gameStatus to won if no coins remain\n * @param coinEntity\n * @param gameState\n * @returns\n */\nfunction collide(coinEntity, gameState) {\n    var actorsExcludingTarget = gameState.level.actors.filter(function (actor) { return actor !== coinEntity; });\n    var coinsRemaining = actorsExcludingTarget.some(function (actor) { return actor.type === 'coin'; });\n    var status = coinsRemaining ? gameState.status : 'won';\n    var newLevel = gameState.level;\n    newLevel.actors = actorsExcludingTarget;\n    return _gameState__WEBPACK_IMPORTED_MODULE_1__.createGameState(newLevel, status);\n}\n/**\n * Every coin entity wobbles around its base position\n * Keeping track of basePosition seperate from the current position mitigates potential 'drift' issues\n * @param coinEntity\n * @param deltaTime\n * @param state\n * @returns\n */\nfunction update(coinEntity, deltaTime, state) {\n    var wobbleSpeed = 8, wobbleDist = 0.07;\n    var wobble = coinEntity.state.wobble + deltaTime * wobbleSpeed;\n    var wobblePos = Math.sin(wobble) * wobbleDist;\n    var newPosition = _vector_utils__WEBPACK_IMPORTED_MODULE_0__.add(coinEntity.state.basePosition, _vector_utils__WEBPACK_IMPORTED_MODULE_0__.create(0, wobblePos));\n    var newCoinEntity = coinEntity;\n    newCoinEntity.state.wobble = wobble;\n    newCoinEntity.position = newPosition;\n    return newCoinEntity;\n}\n\n\n\n//# sourceURL=webpack://browser-test/./src/actors/coin.ts?");

/***/ }),

/***/ "./src/actors/lava.ts":
/*!****************************!*\
  !*** ./src/actors/lava.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   create: () => (/* binding */ create)\n/* harmony export */ });\n/* harmony import */ var _vector_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../vector_utils */ \"./src/vector_utils.ts\");\n/* harmony import */ var _level__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../level */ \"./src/level.ts\");\n/* harmony import */ var _gameState__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../gameState */ \"./src/gameState.ts\");\n\n\n\n/**\n * Creates actor instance of type lava\n * Allows for different varieties/behaviours of lava\n * @param position\n * @param ch\n * @param resetPosition\n * @returns\n */\nfunction create(position, lavaSubtype, resetPosition) {\n    var speed = _vector_utils__WEBPACK_IMPORTED_MODULE_0__.create(0, 0);\n    if (lavaSubtype === \"sliding\") {\n        speed = _vector_utils__WEBPACK_IMPORTED_MODULE_0__.create(2, 0);\n    }\n    else if (lavaSubtype === \"bouncing\") {\n        speed = _vector_utils__WEBPACK_IMPORTED_MODULE_0__.create(0, -2);\n    }\n    else if (lavaSubtype === \"dropping\") {\n        resetPosition = position;\n        speed = _vector_utils__WEBPACK_IMPORTED_MODULE_0__.create(0, 2);\n    }\n    else {\n        throw \"Invalid lava subtype\";\n    }\n    return {\n        position: position,\n        size: _vector_utils__WEBPACK_IMPORTED_MODULE_0__.create(1, 1),\n        type: 'lava',\n        state: {\n            speed: speed,\n            resetPosition: resetPosition,\n        },\n        update: update,\n        collide: collide,\n    };\n}\n/**\n * Encapsulates update logic for instances of moving lava\n * @param lavaEntity\n * @param deltaTime\n * @param state\n * @returns\n */\nfunction update(lavaEntity, deltaTime, state) {\n    var positionDelta = _vector_utils__WEBPACK_IMPORTED_MODULE_0__.mult(lavaEntity.state.speed, deltaTime);\n    var newPosition = _vector_utils__WEBPACK_IMPORTED_MODULE_0__.add(lavaEntity.position, positionDelta);\n    var newPositionTouchesWall = _level__WEBPACK_IMPORTED_MODULE_1__.touches(state.level, newPosition, lavaEntity.size, \"wall\");\n    // If reset positon is defined the lava will reset to that position upon collision with a \"wall\" tile\n    var resetPosition = lavaEntity.state.resetPosition;\n    var newLavaEntity = lavaEntity;\n    if (!newPositionTouchesWall) {\n        newLavaEntity.position = newPosition;\n    }\n    else if (resetPosition) {\n        newLavaEntity.position = resetPosition;\n    }\n    else {\n        newLavaEntity.state.speed = _vector_utils__WEBPACK_IMPORTED_MODULE_0__.mult(lavaEntity.state.speed, -1);\n    }\n    return lavaEntity;\n}\n/**\n * Any collision with instance of lava entity returns a \"lost\" gamestate\n * @param actor\n * @param gameState\n * @returns\n */\nfunction collide(actor, gameState) {\n    return _gameState__WEBPACK_IMPORTED_MODULE_2__.createGameState(gameState.level, \"lost\");\n}\n\n\n\n//# sourceURL=webpack://browser-test/./src/actors/lava.ts?");

/***/ }),

/***/ "./src/actors/player.ts":
/*!******************************!*\
  !*** ./src/actors/player.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   create: () => (/* binding */ create)\n/* harmony export */ });\n/* harmony import */ var _vector_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../vector_utils */ \"./src/vector_utils.ts\");\n/* harmony import */ var _level__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../level */ \"./src/level.ts\");\n\n\n/**\n * Creates player entity\n * @param position\n * @returns\n */\nfunction create(position) {\n    return {\n        position: _vector_utils__WEBPACK_IMPORTED_MODULE_0__.add(position, _vector_utils__WEBPACK_IMPORTED_MODULE_0__.create(0, -0.5)),\n        size: _vector_utils__WEBPACK_IMPORTED_MODULE_0__.create(0.8, 1.5),\n        type: 'player',\n        state: {\n            speed: _vector_utils__WEBPACK_IMPORTED_MODULE_0__.create(0, 0),\n        },\n        update: update,\n    };\n}\n/**\n * Updates the player entity\n * @param playerEntity\n * @param deltaTime\n * @param gameState\n * @param commands\n * @returns\n */\nfunction update(playerEntity, deltaTime, gameState, commands) {\n    var playerXSpeed = 7;\n    var gravity = 30;\n    var jumpSpeed = 17;\n    var xSpeed = ((commands.left ? -1 : 0) + (commands.right ? 1 : 0)) * playerXSpeed;\n    var ySpeed = playerEntity.state.speed.y + deltaTime * gravity;\n    var xDelta = _vector_utils__WEBPACK_IMPORTED_MODULE_0__.create(xSpeed * deltaTime, 0);\n    var yDelta = _vector_utils__WEBPACK_IMPORTED_MODULE_0__.create(0, ySpeed * deltaTime);\n    var wontCollideWithWall = !_level__WEBPACK_IMPORTED_MODULE_1__.touches(gameState.level, _vector_utils__WEBPACK_IMPORTED_MODULE_0__.add(xDelta, playerEntity.position), playerEntity.size, 'wall');\n    if (wontCollideWithWall) {\n        playerEntity.position = _vector_utils__WEBPACK_IMPORTED_MODULE_0__.add(playerEntity.position, xDelta);\n    }\n    var wontCollideWithGround = !_level__WEBPACK_IMPORTED_MODULE_1__.touches(gameState.level, _vector_utils__WEBPACK_IMPORTED_MODULE_0__.add(yDelta, playerEntity.position), playerEntity.size, 'wall');\n    if (wontCollideWithGround) {\n        playerEntity.position = _vector_utils__WEBPACK_IMPORTED_MODULE_0__.add(playerEntity.position, yDelta);\n    }\n    else if (commands.jump && ySpeed > 0) {\n        ySpeed = -jumpSpeed;\n    }\n    else {\n        ySpeed = 0;\n    }\n    playerEntity.state.speed = _vector_utils__WEBPACK_IMPORTED_MODULE_0__.create(xSpeed, ySpeed);\n    return playerEntity;\n}\n\n\n\n//# sourceURL=webpack://browser-test/./src/actors/player.ts?");

/***/ }),

/***/ "./src/controlMapping.ts":
/*!*******************************!*\
  !*** ./src/controlMapping.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   controlMapping: () => (/* binding */ controlMapping)\n/* harmony export */ });\n/**\n * Returns reference to command data object that is modified via event listener callback to reflect player input\n * @param controlPairs\n * @returns\n */\nfunction controlMapping(controlPairs) {\n    var down = Object.create(null);\n    function track(event) {\n        for (var _i = 0, _a = Object.entries(controlPairs); _i < _a.length; _i++) {\n            var _b = _a[_i], command = _b[0], key = _b[1];\n            if (event.key === key) {\n                down[command] = event.type === \"keydown\";\n                event.preventDefault();\n            }\n        }\n    }\n    window.addEventListener(\"keydown\", track);\n    window.addEventListener(\"keyup\", track);\n    return down;\n}\n\n\n\n//# sourceURL=webpack://browser-test/./src/controlMapping.ts?");

/***/ }),

/***/ "./src/displayState.ts":
/*!*****************************!*\
  !*** ./src/displayState.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clearGameDOM: () => (/* binding */ clearGameDOM),\n/* harmony export */   createDisplayState: () => (/* binding */ createDisplayState),\n/* harmony export */   displaySync: () => (/* binding */ displaySync)\n/* harmony export */ });\n/* harmony import */ var _gameState__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./gameState */ \"./src/gameState.ts\");\n/* harmony import */ var _vector_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./vector_utils */ \"./src/vector_utils.ts\");\nvar __spreadArray = (undefined && undefined.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\n\n\n/**\n * Updates display state to match gamestate\n * @param gameState\n * @param displayState\n * @returns\n */\nfunction displaySync(gameState, displayState) {\n    if (displayState.actorLayer) {\n        displayState.actorLayer.remove();\n    }\n    var actorLayer = drawActors(gameState.level.actors, displayState.scale);\n    displayState.dom.appendChild(actorLayer);\n    displayState.dom.className = \"game \".concat(gameState.status);\n    scrollPlayerIntoView(gameState, displayState);\n    return {\n        scale: displayState.scale,\n        dom: displayState.dom,\n        actorLayer: actorLayer\n    };\n}\n/**\n * Utilizes dom scrolling to keep player presented in center screen\n * with slack for visual appeal\n * @param gameState\n * @param displayState\n */\nfunction scrollPlayerIntoView(gameState, displayState) {\n    var dom = displayState.dom;\n    var width = dom.clientWidth;\n    var height = dom.clientHeight;\n    var margin = width / 3;\n    var left = dom.scrollLeft;\n    var right = left + width;\n    var top = dom.scrollTop;\n    var bottom = top + height;\n    var player = _gameState__WEBPACK_IMPORTED_MODULE_0__.getPlayerFromGameState(gameState);\n    var playerDisplayOffset = _vector_utils__WEBPACK_IMPORTED_MODULE_1__.mult(player.size, 0.5);\n    var center = _vector_utils__WEBPACK_IMPORTED_MODULE_1__.mult(_vector_utils__WEBPACK_IMPORTED_MODULE_1__.add(player.position, playerDisplayOffset), displayState.scale);\n    if (center.x < left + margin) {\n        dom.scrollLeft = center.x - margin;\n    }\n    else if (center.x > right - margin) {\n        dom.scrollLeft = center.x + margin - width;\n    }\n    if (center.y < top + margin) {\n        dom.scrollTop = center.y - margin;\n    }\n    else if (center.y > bottom - margin) {\n        dom.scrollTop = center.y + margin - height;\n    }\n}\n/**\n * Removes a dom element and all children.\n * Utilized upon level completion to reset displayState.\n * @param displayState\n */\nfunction clearGameDOM(displayState) {\n    displayState.dom.remove();\n}\n/**\n * Builds game DOM containing static level geomertry, attaches to target element, and returns reference to dom\n * @param level\n * @returns\n */\nfunction createDisplayState(level) {\n    var targetElement = document.body;\n    while (targetElement.firstChild) {\n        targetElement.removeChild(targetElement.lastChild);\n    }\n    var scale = 20;\n    var dom = buildNode(\"div\", [['class', 'game']], drawGrid(level, scale));\n    var actorLayer = drawActors(level.actors, scale);\n    targetElement.appendChild(dom);\n    return {\n        scale: scale,\n        dom: dom,\n        actorLayer: actorLayer\n    };\n}\n/**\n * Builds an html element with specified tagName with specificed attributes.\n * Appends input children.\n * @param name\n * @param attributes\n * @param children\n * @returns\n */\nfunction buildNode(tagName, attributes) {\n    var children = [];\n    for (var _i = 2; _i < arguments.length; _i++) {\n        children[_i - 2] = arguments[_i];\n    }\n    var dom = document.createElement(tagName);\n    for (var _a = 0, attributes_1 = attributes; _a < attributes_1.length; _a++) {\n        var _b = attributes_1[_a], key = _b[0], value = _b[1];\n        dom.setAttribute(key, value);\n    }\n    for (var _c = 0, children_1 = children; _c < children_1.length; _c++) {\n        var child = children_1[_c];\n        dom.appendChild(child);\n    }\n    return dom;\n}\n/**\n * Builds DOM representation of static level geometry with table columns and rows\n * @param level\n * @param scale\n * @returns\n */\nfunction drawGrid(level, scale) {\n    var backdropAttributes = [['class', \"background\"], ['style', \"width: \".concat(level.width * scale, \"px\")]];\n    var rowAttributes = [[\"style\", \"height: \".concat(scale, \"px\")]];\n    return buildNode.apply(void 0, __spreadArray([\"table\", backdropAttributes], level.rows.map(function (row) { return buildNode.apply(void 0, __spreadArray([\"tr\", rowAttributes], row.map(function (type) { return buildNode(\"td\", [['class', type]]); }), false)); }), false));\n}\n/**\n * Populates and returns a div with representations of a levels actors\n * @param actors\n * @param scale\n * @returns\n */\nfunction drawActors(actors, scale) {\n    return buildNode.apply(void 0, __spreadArray([\"div\", [['class', 'actor-layer']]], actors.map(function (actor) {\n        var rect = buildNode(\"div\", [[\"class\", \"actor \".concat(actor.type)]]);\n        rect.style.width = \"\".concat(actor.size.x * scale, \"px\");\n        rect.style.height = \"\".concat(actor.size.y * scale, \"px\");\n        rect.style.left = \"\".concat(actor.position.x * scale, \"px\");\n        rect.style.top = \"\".concat(actor.position.y * scale, \"px\");\n        return rect;\n    }), false));\n    ;\n}\n\n\n\n//# sourceURL=webpack://browser-test/./src/displayState.ts?");

/***/ }),

/***/ "./src/gameState.ts":
/*!**************************!*\
  !*** ./src/gameState.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createGameState: () => (/* binding */ createGameState),\n/* harmony export */   getPlayerFromGameState: () => (/* binding */ getPlayerFromGameState),\n/* harmony export */   updateGameState: () => (/* binding */ updateGameState)\n/* harmony export */ });\n/* harmony import */ var _level__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./level */ \"./src/level.ts\");\n\n/**\n * Convenient for creating gameState objects within a single line\n * @param level\n * @param status\n * @returns\n */\nfunction createGameState(level, status) {\n    if (status === void 0) { status = 'playing'; }\n    return {\n        level: level,\n        status: status\n    };\n}\n/**\n * Generally useful for scene actors to have an easy reference to the player entity\n * Does not support multiple players\n * @param gameState\n * @returns\n */\nfunction getPlayerFromGameState(gameState) {\n    return gameState.level.actors.find(function (actor) { return actor.type === \"player\"; });\n}\n/**\n * Higher level management of actor updates/collisions\n * Directly handles player + static lava collisions\n * @param gameState\n * @param deltaTime\n * @param commands\n * @returns\n */\nfunction updateGameState(gameState, deltaTime, commands) {\n    var newState = createGameState(gameState.level, gameState.status);\n    newState.level.actors = newState.level.actors.map(function (actor) { return actor.update(actor, deltaTime, gameState, commands); });\n    if (newState.status !== \"playing\") {\n        return newState;\n    }\n    var player = getPlayerFromGameState(newState);\n    var playerTouchingLava = _level__WEBPACK_IMPORTED_MODULE_0__.touches(newState.level, player.position, player.size, \"lava\");\n    if (playerTouchingLava) {\n        return createGameState(newState.level, 'lost');\n    }\n    for (var _i = 0, _a = newState.level.actors; _i < _a.length; _i++) {\n        var actor = _a[_i];\n        if (actor !== player && overlap(actor, player)) {\n            newState = actor.collide(actor, newState);\n        }\n    }\n    return newState;\n}\n/**\n * Detects collisions between two actors\n * Assumes actors are rectangular\n * @param actor1\n * @param actor2\n * @returns\n */\nfunction overlap(actor1, actor2) {\n    return actor1.position.x + actor1.size.x > actor2.position.x &&\n        actor1.position.x < actor2.position.x + actor2.size.x &&\n        actor1.position.y + actor1.size.y > actor2.position.y &&\n        actor1.position.y < actor2.position.y + actor2.size.y;\n}\n\n\n\n//# sourceURL=webpack://browser-test/./src/gameState.ts?");

/***/ }),

/***/ "./src/level.ts":
/*!**********************!*\
  !*** ./src/level.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   planToLevel: () => (/* binding */ planToLevel),\n/* harmony export */   touches: () => (/* binding */ touches)\n/* harmony export */ });\n/* harmony import */ var _vector_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./vector_utils */ \"./src/vector_utils.ts\");\n/* harmony import */ var _actors_lava__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./actors/lava */ \"./src/actors/lava.ts\");\n/* harmony import */ var _actors_coin__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./actors/coin */ \"./src/actors/coin.ts\");\n/* harmony import */ var _actors_player__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./actors/player */ \"./src/actors/player.ts\");\n\n\n\n\n/**\n * Builds level object from string\n * @param plan\n * @returns\n */\nfunction planToLevel(plan) {\n    var rows = plan.trim().split(\"\\n\").map(function (l) { return l.split(''); });\n    var height = rows.length;\n    var width = rows[0].length;\n    var actors = [];\n    rows = rows.map(function (row, y) {\n        return row.map(function (ch, x) {\n            var levelGeometryMapping = levelGeometryMap[ch];\n            var levelActorMapping = levelActorMap[ch];\n            if (levelGeometryMapping) {\n                return levelGeometryMapping;\n            }\n            if (levelActorMapping) {\n                var actorType = levelActorMapping;\n                actors.push(actorType(_vector_utils__WEBPACK_IMPORTED_MODULE_0__.create(x, y)));\n                return 'empty';\n            }\n            throw \"invalid level character\";\n        });\n    });\n    return {\n        rows: rows,\n        height: height,\n        width: width,\n        actors: actors\n    };\n}\nvar levelGeometryMap = {\n    \".\": \"empty\",\n    \"#\": \"wall\",\n    \"+\": \"lava\"\n};\nvar levelActorMap = {\n    \"@\": function (position) { return _actors_player__WEBPACK_IMPORTED_MODULE_3__.create(position); },\n    \"o\": function (position) { return _actors_coin__WEBPACK_IMPORTED_MODULE_2__.create(position); },\n    \"=\": function (position) { return _actors_lava__WEBPACK_IMPORTED_MODULE_1__.create(position, 'sliding'); },\n    \"|\": function (position) { return _actors_lava__WEBPACK_IMPORTED_MODULE_1__.create(position, 'bouncing'); },\n    \"v\": function (position) { return _actors_lava__WEBPACK_IMPORTED_MODULE_1__.create(position, 'dropping'); }\n};\n/**\n * Checks if something of given position and size intersects a static level feature of given type\n * If point being evaluated is outside boundary of defined level geometry it is evaluated as a 'wall'\n * @param level\n * @param pos\n * @param size\n * @param type\n * @returns\n */\nfunction touches(level, pos, size, type) {\n    var xStart = Math.floor(pos.x);\n    var xEnd = Math.ceil(pos.x + size.x);\n    var yStart = Math.floor(pos.y);\n    var yEnd = Math.ceil(pos.y + size.y);\n    for (var y = yStart; y < yEnd; y++) {\n        for (var x = xStart; x < xEnd; x++) {\n            var isOutside = x < 0 || x >= level.width || y < 0 || y >= level.height;\n            var here = isOutside ? \"wall\" : level.rows[y][x];\n            if (here === type) {\n                return true;\n            }\n        }\n    }\n    return false;\n}\n\n\n\n//# sourceURL=webpack://browser-test/./src/level.ts?");

/***/ }),

/***/ "./src/levels/gameLevels.ts":
/*!**********************************!*\
  !*** ./src/levels/gameLevels.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GAME_LEVELS: () => (/* binding */ GAME_LEVELS)\n/* harmony export */ });\nvar GAME_LEVELS = [\"                                                    \\n................................................................................\\n................................................................................\\n................................................................................\\n................................................................................\\n................................................................................\\n................................................................................\\n..................................................................###...........\\n...................................................##......##....##+##..........\\n....................................o.o......##..................#+++#..........\\n.................................................................##+##..........\\n...................................#####..........................#v#...........\\n............................................................................##..\\n..##......................................o.o................................#..\\n..#.....................o....................................................#..\\n..#......................................#####.............................o.#..\\n..#.....................o....................................................#..\\n..#..@...........................................................#####.......#..\\n..############..###############...####################.....#######...#########..\\n.............#++#.............#...#..................#.....#....................\\n.............#++#.............#+++#..................#+++++#....................\\n.............#++#.............#+++#..................#+++++#....................\\n.............####.............#####..................#######....................\\n................................................................................\\n................................................................................\\n\", \"                                                                     \\n................................................................................\\n................................................................................\\n....###############################.............................................\\n...##.............................##########################################....\\n...#.......................................................................##...\\n...#....o...................................................................#...\\n...#................................................=.......................#...\\n...#.o........################...................o..o...........|........o..#...\\n...#.........................#..............................................#...\\n...#....o....................##########.....###################....##########...\\n...#..................................#+++++#.................#....#............\\n...###############....oo......=o.o.o..#######.###############.#....#............\\n.....#...............o..o.............#.......#......#........#....#............\\n.....#....................#############..######.####.#.########....########.....\\n.....#.............########..............#...........#.#..................#.....\\n.....#..........####......####...#####################.#..................#.....\\n.....#........###............###.......................########....########.....\\n.....#.......##................#########################......#....#............\\n.....#.......#................................................#....#............\\n.....###......................................................#....#............\\n.......#...............o...........................................#............\\n.......#...............................................o...........#............\\n.......#########......###.....############.........................##...........\\n.............#..................#........#####....#######.o.........########....\\n.............#++++++++++++++++++#............#....#.....#..................#....\\n.............#++++++++++++++++++#..........###....###...####.o.............#....\\n.............####################..........#........#......#.....|.........#....\\n...........................................#++++++++#......####............#....\\n...........................................#++++++++#.........#........@...#....\\n...........................................#++++++++#.........##############....\\n...........................................##########...........................\\n................................................................................\\n\", \"\\n......................................#++#........................#######....................................#+#..\\n......................................#++#.....................####.....####.................................#+#..\\n......................................#++##########...........##...........##................................#+#..\\n......................................##++++++++++##.........##.............##...............................#+#..\\n.......................................##########++#.........#....................................o...o...o..#+#..\\n................................................##+#.........#.....o...o....................................##+#..\\n.................................................#+#.........#................................###############++#..\\n.................................................#v#.........#.....#...#........................++++++++++++++##..\\n.............................................................##..|...|...|..##............#####################...\\n..............................................................##+++++++++++##............v........................\\n...............................................................####+++++####......................................\\n...............................................#.....#............#######........###.........###..................\\n...............................................#.....#...........................#.#.........#.#..................\\n...............................................#.....#.............................#.........#....................\\n...............................................#.....#.............................##........#....................\\n...............................................##....#.............................#.........#....................\\n...............................................#.....#......o..o.....#...#.........#.........#....................\\n...............#######........###...###........#.....#...............#...#.........#.........#....................\\n..............##.....##.........#...#..........#.....#.....######....#...#...#########.......#....................\\n.............##.......##........#.o.#..........#....##...............#...#...#...............#....................\\n.....@.......#.........#........#...#..........#.....#...............#...#...#...............#....................\\n....###......#.........#........#...#..........#.....#...............#...#####...######......#....................\\n....#.#......#.........#.......##.o.##.........#.....#...............#.....o.....#.#.........#....................\\n++++#.#++++++#.........#++++++##.....##++++++++##....#++++++++++.....#.....=.....#.#.........#....................\\n++++#.#++++++#.........#+++++##.......##########.....#+++++++##+.....#############.##..o.o..##....................\\n++++#.#++++++#.........#+++++#....o.................##++++++##.+....................##.....##.....................\\n++++#.#++++++#.........#+++++#.....................##++++++##..+.....................#######......................\\n++++#.#++++++#.........#+++++##.......##############++++++##...+..................................................\\n++++#.#++++++#.........#++++++#########++++++++++++++++++##....+..................................................\\n++++#.#++++++#.........#++++++++++++++++++++++++++++++++##.....++++++++++++.......................................\\n\", \"\\n..............................................................................................................\\n..............................................................................................................\\n..............................................................................................................\\n..............................................................................................................\\n..............................................................................................................\\n........................................o.....................................................................\\n..............................................................................................................\\n........................................#.....................................................................\\n........................................#.....................................................................\\n........................................#.....................................................................\\n........................................#.....................................................................\\n.......................................###....................................................................\\n.......................................#.#.................+++........+++..###................................\\n.......................................#.#.................+#+........+#+.....................................\\n.....................................###.###................#..........#......................................\\n......................................#...#.................#...oooo...#.......###............................\\n......................................#...#.................#..........#......#+++#...........................\\n......................................#...#.................############.......###............................\\n.....................................##...##......#...#......#................................................\\n......................................#...#########...########..............#.#...............................\\n......................................#...#...........#....................#+++#..............................\\n......................................#...#...........#.....................###...............................\\n.....................................##...##..........#.......................................................\\n......................................#...#=.=.=.=....#............###........................................\\n......................................#...#...........#...........#+++#.......................................\\n......................................#...#....=.=.=.=#.....o......###.......###..............................\\n.....................................##...##..........#.....................#+++#.............................\\n..............................o...o...#...#...........#.....#................##v........###...................\\n......................................#...#...........#..............#.................#+++#..................\\n.............................###.###.###.###.....o.o..#++++++++++++++#...................v#...................\\n.............................#.###.#.#.###.#..........#++++++++++++++#........................................\\n.............................#.............#...#######################........................................\\n.............................##...........##.........................................###......................\\n..###.........................#.....#.....#.........................................#+++#................###..\\n..#.#.........................#....###....#..........................................###.................#.#..\\n..#...........................#....###....#######........................#####.............................#..\\n..#...........................#...........#..............................#...#.............................#..\\n..#...........................##..........#..............................#.#.#.............................#..\\n..#.......................................#.......|####|....|####|.....###.###.............................#..\\n..#................###.............o.o....#..............................#.........###.....................#..\\n..#...............#####.......##..........#.............................###.......#+++#..........#.........#..\\n..#...............o###o.......#....###....#.............................#.#........###..........###........#..\\n..#................###........#############..#.oo.#....#.oo.#....#.oo..##.##....................###........#..\\n..#......@..........#.........#...........#++#....#++++#....#++++#....##...##....................#.........#..\\n..#############################...........#############################.....################################..\\n..............................................................................................................\\n..............................................................................................................\\n\", \"\\n..................................................................................................###.#.......\\n......................................................................................................#.......\\n..................................................................................................#####.......\\n..................................................................................................#...........\\n..................................................................................................#.###.......\\n..........................o.......................................................................#.#.#.......\\n.............................................................................................o.o.o###.#.......\\n...................###................................................................................#.......\\n.......+..o..+................................................#####.#####.#####.#####.#####.#####.#####.......\\n.......#.....#................................................#...#.#...#.#...#.#...#.#...#.#...#.#...........\\n.......#=.o..#............#...................................###.#.###.#.###.#.###.#.###.#.###.#.#####.......\\n.......#.....#..................................................#.#...#.#...#.#...#.#...#.#...#.#.....#.......\\n.......+..o..+............o..................................####.#####.#####.#####.#####.#####.#######.......\\n..............................................................................................................\\n..........o..............###..............................##..................................................\\n..............................................................................................................\\n..............................................................................................................\\n......................................................##......................................................\\n...................###.........###............................................................................\\n..............................................................................................................\\n..........................o.....................................................#......#......................\\n..........................................................##.....##...........................................\\n.............###.........###.........###.................................#..................#.................\\n..............................................................................................................\\n.................................................................||...........................................\\n..###########.................................................................................................\\n..#.........#.o.#########.o.#########.o.##................................................#...................\\n..#.........#...#.......#...#.......#...#.................||..................#.....#.........................\\n..#..@......#####...o...#####...o...#####.....................................................................\\n..#######.....................................#####.......##.....##.....###...................................\\n........#=..................=................=#...#.....................###...................................\\n........#######################################...#+++++++++++++++++++++###+++++++++++++++++++++++++++++++++++\\n..................................................############################################################\\n..............................................................................................................\\n\"\n];\n\n\n\n//# sourceURL=webpack://browser-test/./src/levels/gameLevels.ts?");

/***/ }),

/***/ "./src/runTime.ts":
/*!************************!*\
  !*** ./src/runTime.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   runGame: () => (/* binding */ runGame)\n/* harmony export */ });\n/* harmony import */ var _level__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./level */ \"./src/level.ts\");\n/* harmony import */ var _displayState__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./displayState */ \"./src/displayState.ts\");\n/* harmony import */ var _gameState__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./gameState */ \"./src/gameState.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\nfunction runGame(levelPlans, commands) {\n    return __awaiter(this, void 0, void 0, function () {\n        var maxLives, lives, levelIndex, levelData, status_1;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    maxLives = 3;\n                    lives = maxLives;\n                    levelIndex = 0;\n                    _a.label = 1;\n                case 1:\n                    if (!(levelIndex < levelPlans.length)) return [3 /*break*/, 4];\n                    levelData = _level__WEBPACK_IMPORTED_MODULE_0__.planToLevel(levelPlans[levelIndex]);\n                    return [4 /*yield*/, runLevel(levelData, commands)];\n                case 2:\n                    status_1 = _a.sent();\n                    if (status_1 === \"won\") {\n                        levelIndex++;\n                    }\n                    if (status_1 === \"lost\") {\n                        lives--;\n                        console.log(\"\".concat(lives, \" lives remaining\"));\n                    }\n                    if (lives === 0) {\n                        console.log(\"YOU DIED\");\n                        levelIndex = 0;\n                        lives = maxLives;\n                    }\n                    _a.label = 3;\n                case 3: return [3 /*break*/, 1];\n                case 4:\n                    console.log(\"You've won!\");\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\nfunction runLevel(level, commands) {\n    var gameState = _gameState__WEBPACK_IMPORTED_MODULE_2__.createGameState(level, 'playing');\n    var gameDisplay = _displayState__WEBPACK_IMPORTED_MODULE_1__.createDisplayState(level);\n    var levelEndDelay = 1;\n    return new Promise(function (resolve) {\n        runAnimation(function (deltaTime) {\n            gameState = _gameState__WEBPACK_IMPORTED_MODULE_2__.updateGameState(gameState, deltaTime, commands);\n            gameDisplay = _displayState__WEBPACK_IMPORTED_MODULE_1__.displaySync(gameState, gameDisplay);\n            if (gameState.status == \"playing\") {\n                return true;\n            }\n            else if (levelEndDelay > 0) {\n                levelEndDelay -= deltaTime;\n                return true;\n            }\n            else {\n                _displayState__WEBPACK_IMPORTED_MODULE_1__.clearGameDOM(gameDisplay);\n                resolve(gameState.status);\n                return false;\n            }\n        });\n    });\n}\nfunction runAnimation(frameFunc) {\n    var lastTime = null;\n    function frame(time) {\n        if (lastTime !== null) {\n            var deltaTime = Math.min(time - lastTime, 100) / 1000;\n            if (frameFunc(deltaTime) === false) {\n                return;\n            }\n        }\n        lastTime = time;\n        requestAnimationFrame(frame);\n    }\n    requestAnimationFrame(frame);\n}\n\n\n\n//# sourceURL=webpack://browser-test/./src/runTime.ts?");

/***/ }),

/***/ "./src/vector_utils.ts":
/*!*****************************!*\
  !*** ./src/vector_utils.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   add: () => (/* binding */ add),\n/* harmony export */   create: () => (/* binding */ create),\n/* harmony export */   dot: () => (/* binding */ dot),\n/* harmony export */   magnitude: () => (/* binding */ magnitude),\n/* harmony export */   mult: () => (/* binding */ mult),\n/* harmony export */   normalize: () => (/* binding */ normalize),\n/* harmony export */   perp: () => (/* binding */ perp),\n/* harmony export */   sub: () => (/* binding */ sub),\n/* harmony export */   zero: () => (/* binding */ zero)\n/* harmony export */ });\nfunction add(a, b) {\n    return { x: a.x + b.x, y: a.y + b.y };\n}\nfunction sub(a, b) {\n    return { x: a.x - b.x, y: a.y - b.y };\n}\nfunction mult(a, scalar) {\n    return { x: a.x * scalar, y: a.y * scalar };\n}\nfunction magnitude(a) {\n    return Math.sqrt(a.x * a.x + a.y * a.y);\n}\nfunction normalize(a) {\n    var length = magnitude(a);\n    if (length === 0) {\n        throw \"Cannot normalize the zero vector.\";\n    }\n    return { x: a.x / length, y: a.y / length };\n}\nfunction dot(a, b) {\n    return a.x * b.x + a.y * b.y;\n}\nfunction zero() {\n    return { x: 0, y: 0 };\n}\nfunction perp(a) {\n    return { x: a.y, y: -a.x };\n}\nfunction create(x, y) {\n    return { x: x, y: y };\n}\n\n\n\n//# sourceURL=webpack://browser-test/./src/vector_utils.ts?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./index.ts");
/******/ 	
/******/ })()
;